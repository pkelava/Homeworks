#ifndef F_CPU
#define F_CPU 16000000UL
#endif

#include <avr/io.h>
#include <util/delay.h>
#include <avr/interrupt.h>

#include "serial.h"


int main(void)
{
	uart_init();
	// enables fixed_bandga on positive side of comp.
	ACSR |= (1 << ACBG);
	// analog comp 
	ADCSRB |= (1 << ACME);
	// turn off ADC on A register
	ADCSRA &= ~(1 << ADEN);
	// shift from AIN1 to ADC3
	ADMUX |= (1 << MUX0) | (1 << MUX1);

    while (1) 
    {
		// AI1 < AI0, else otherwise
		if (ACSR & (1 << ACO))
			uart_putstr("Ispod 1.1V\n");
		else
			uart_putstr("Iznad 1.1V\n");

		_delay_ms(500);
    }
}
